<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveRecord::Relation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveRecord::Relation</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/Library/Ruby/Gems/1_8/gems/activerecord-3_0_0/lib/active_record/relation_rb.html">
                /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>Active Record <a href="Relation.html">Relation</a></h1>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001515">==</a>&nbsp;&nbsp;
      <a href="#M001499">any?</a>&nbsp;&nbsp;
      <a href="#M001496">as_json</a>&nbsp;&nbsp;
      <a href="#M001491">build</a>&nbsp;&nbsp;
      <a href="#M001492">create</a>&nbsp;&nbsp;
      <a href="#M001493">create!</a>&nbsp;&nbsp;
      <a href="#M001507">delete</a>&nbsp;&nbsp;
      <a href="#M001506">delete_all</a>&nbsp;&nbsp;
      <a href="#M001505">destroy</a>&nbsp;&nbsp;
      <a href="#M001504">destroy_all</a>&nbsp;&nbsp;
      <a href="#M001514">eager_loading?</a>&nbsp;&nbsp;
      <a href="#M001498">empty?</a>&nbsp;&nbsp;
      <a href="#M001490">initialize_copy</a>&nbsp;&nbsp;
      <a href="#M001516">inspect</a>&nbsp;&nbsp;
      <a href="#M001500">many?</a>&nbsp;&nbsp;
      <a href="#M001517">method_missing</a>&nbsp;&nbsp;
      <a href="#M001489">new</a>&nbsp;&nbsp;
      <a href="#M001488">new</a>&nbsp;&nbsp;
      <a href="#M001510">primary_key</a>&nbsp;&nbsp;
      <a href="#M001508">reload</a>&nbsp;&nbsp;
      <a href="#M001509">reset</a>&nbsp;&nbsp;
      <a href="#M001494">respond_to?</a>&nbsp;&nbsp;
      <a href="#M001513">scope_for_create</a>&nbsp;&nbsp;
      <a href="#M001501">scoping</a>&nbsp;&nbsp;
      <a href="#M001497">size</a>&nbsp;&nbsp;
      <a href="#M001495">to_a</a>&nbsp;&nbsp;
      <a href="#M001511">to_sql</a>&nbsp;&nbsp;
      <a href="#M001503">update</a>&nbsp;&nbsp;
      <a href="#M001502">update_all</a>&nbsp;&nbsp;
      <a href="#M001512">where_values_hash</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="FinderMethods.html">FinderMethods</a></span>
        <span class="include-name"><a href="Calculations.html">Calculations</a></span>
        <span class="include-name"><a href="SpawnMethods.html">SpawnMethods</a></span>
        <span class="include-name"><a href="QueryMethods.html">QueryMethods</a></span>
        <span class="include-name">Batches</span>
      </div>
    </div>

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">JoinOperation</td>
          <td>=</td>
          <td class="context-item-value">Struct.new(:relation, :join_class, :on)</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">ASSOCIATION_METHODS</td>
          <td>=</td>
          <td class="context-item-value">[:includes, :eager_load, :preload]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">MULTI_VALUE_METHODS</td>
          <td>=</td>
          <td class="context-item-value">[:select, :group, :order, :joins, :where, :having]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SINGLE_VALUE_METHODS</td>
          <td>=</td>
          <td class="context-item-value">[:limit, :offset, :lock, :readonly, :create_with, :from]</td>
        </tr>
        </table>
      </div>
    </div>

    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">loaded</td>
          <td>-&gt;</td>
          <td class="context-item-value">loaded?</td>
        </tr>
                        </table>
      </div>
    </div>


    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">extensions</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">klass</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">loaded</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">table</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M001488" class="method-detail">
        <a name="M001488"></a>

        <div class="method-heading">
          <a href="#M001488" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(klass, table)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001488-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001488-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 20</span>
20:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">table</span>)
21:       <span class="ruby-ivar">@klass</span>, <span class="ruby-ivar">@table</span> = <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">table</span>
22: 
23:       <span class="ruby-ivar">@implicit_readonly</span> = <span class="ruby-keyword kw">nil</span>
24:       <span class="ruby-ivar">@loaded</span>            = <span class="ruby-keyword kw">false</span>
25: 
26:       <span class="ruby-constant">SINGLE_VALUE_METHODS</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{v}_value&quot;</span><span class="ruby-node">&quot;@#{v}_value&quot;</span>, <span class="ruby-keyword kw">nil</span>)}
27:       (<span class="ruby-constant">ASSOCIATION_METHODS</span> <span class="ruby-operator">+</span> <span class="ruby-constant">MULTI_VALUE_METHODS</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{v}_values&quot;</span><span class="ruby-node">&quot;@#{v}_values&quot;</span>, [])}
28:       <span class="ruby-ivar">@extensions</span> = []
29:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001515" class="method-detail">
        <a name="M001515"></a>

        <div class="method-heading">
          <a href="#M001515" class="method-signature">
          <span class="method-name">==</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001515-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001515-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 339</span>
339:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
340:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">other</span>
341:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Relation</span>
342:         <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_sql</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">to_sql</span>
343:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
344:         <span class="ruby-identifier">to_a</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_a</span>
345:       <span class="ruby-keyword kw">end</span>
346:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001499" class="method-detail">
        <a name="M001499"></a>

        <div class="method-heading">
          <a href="#M001499" class="method-signature">
          <span class="method-name">any?</span><span class="method-args">() {|*block_args| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001499-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001499-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 91</span>
91:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">any?</span>
92:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
93:         <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">block_args</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">block_args</span>) }
94:       <span class="ruby-keyword kw">else</span>
95:         <span class="ruby-operator">!</span><span class="ruby-identifier">empty?</span>
96:       <span class="ruby-keyword kw">end</span>
97:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001496" class="method-detail">
        <a name="M001496"></a>

        <div class="method-heading">
          <a href="#M001496" class="method-signature">
          <span class="method-name">as_json</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001496-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001496-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 79</span>
79:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">as_json</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>) <span class="ruby-identifier">to_a</span> <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001491" class="method-detail">
        <a name="M001491"></a>

        <div class="method-heading">
          <span class="method-name">build</span><span class="method-args">(*args, &amp;block)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Relation.html#M001488">new</a>
</p>
        </div>
      </div>

      <div id="method-M001492" class="method-detail">
        <a name="M001492"></a>

        <div class="method-heading">
          <a href="#M001492" class="method-signature">
          <span class="method-name">create</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001492-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001492-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 41</span>
41:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
42:       <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">create</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
43:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001493" class="method-detail">
        <a name="M001493"></a>

        <div class="method-heading">
          <a href="#M001493" class="method-signature">
          <span class="method-name">create!</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001493-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001493-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 45</span>
45:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
46:       <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
47:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001507" class="method-detail">
        <a name="M001507"></a>

        <div class="method-heading">
          <a href="#M001507" class="method-signature">
          <span class="method-name">delete</span><span class="method-args">(id_or_array)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes the row with a primary key matching the <tt>id</tt> argument, using
a SQL <tt>DELETE</tt> statement, and returns the number of rows deleted.
Active Record objects are not instantiated, so the object&#8216;s callbacks
are not executed, including any <tt>:dependent</tt> association options or
<a href="Observer.html">Observer</a> methods.
</p>
<p>
You can <a href="Relation.html#M001507">delete</a> multiple rows at once by
passing an Array of <tt>id</tt>s.
</p>
<p>
Note: Although it is often much faster than the alternative, <tt><a
href="Relation.html#M001505">destroy</a></tt>, skipping callbacks might
bypass business logic in your application that ensures referential
integrity or performs other essential jobs.
</p>
<h4>Examples</h4>
<pre>
  # Delete a single row
  Todo.delete(1)

  # Delete multiple rows
  Todo.delete([2,3,4])
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001507-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001507-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 294</span>
294:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id_or_array</span>)
295:       <span class="ruby-identifier">where</span>(<span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">primary_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id_or_array</span>).<span class="ruby-identifier">delete_all</span>
296:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001506" class="method-detail">
        <a name="M001506"></a>

        <div class="method-heading">
          <a href="#M001506" class="method-signature">
          <span class="method-name">delete_all</span><span class="method-args">(conditions = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes the records matching <tt>conditions</tt> without instantiating the
records first, and hence not calling the <tt><a
href="Relation.html#M001505">destroy</a></tt> method nor invoking
callbacks. This is a single SQL DELETE statement that goes straight to the
database, much more efficient than <tt><a
href="Relation.html#M001504">destroy_all</a></tt>. Be careful with
relations though, in particular <tt>:dependent</tt> rules defined on
associations are not honored. Returns the number of rows affected.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>conditions</tt> - Conditions are specified the same way as with
<tt>find</tt> method.

</li>
</ul>
<h4>Example</h4>
<pre>
  Post.delete_all(&quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;)
  Post.delete_all([&quot;person_id = ? AND (category = ? OR category = ?)&quot;, 5, 'Something', 'Else'])
</pre>
<p>
Both calls <a href="Relation.html#M001507">delete</a> the affected posts
all at once with a single DELETE statement. If you need to <a
href="Relation.html#M001505">destroy</a> dependent associations or call
your <tt>before_*</tt> or <tt>after_destroy</tt> callbacks, use the <tt><a
href="Relation.html#M001504">destroy_all</a></tt> method instead.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001506-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001506-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 270</span>
270:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
271:       <span class="ruby-identifier">conditions</span> <span class="ruby-value">? </span><span class="ruby-identifier">where</span>(<span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">delete_all</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">delete</span>.<span class="ruby-identifier">tap</span> { <span class="ruby-identifier">reset</span> }
272:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001505" class="method-detail">
        <a name="M001505"></a>

        <div class="method-heading">
          <a href="#M001505" class="method-signature">
          <span class="method-name">destroy</span><span class="method-args">(id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Destroy an object (or multiple objects) that has the given id, the object
is instantiated first, therefore all callbacks and filters are fired off
before the object is deleted. This method is less efficient than
ActiveRecord#delete but allows cleanup methods and other actions to be run.
</p>
<p>
This essentially finds the object (or multiple objects) with the given id,
creates a <a href="Relation.html#M001488">new</a> object from the
attributes, and then calls <a href="Relation.html#M001505">destroy</a> on
it.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>id</tt> - Can be either an <a href="../Integer.html">Integer</a> or an
Array of Integers.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Destroy a single object
  Todo.destroy(1)

  # Destroy multiple objects
  todos = [1,2,3]
  Todo.destroy(todos)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001505-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001505-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 244</span>
244:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">id</span>)
245:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
246:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">one_id</span>) }
247:       <span class="ruby-keyword kw">else</span>
248:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>).<span class="ruby-identifier">destroy</span>
249:       <span class="ruby-keyword kw">end</span>
250:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001504" class="method-detail">
        <a name="M001504"></a>

        <div class="method-heading">
          <a href="#M001504" class="method-signature">
          <span class="method-name">destroy_all</span><span class="method-args">(conditions = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling its <tt><a href="Relation.html#M001505">destroy</a></tt>
method. Each object&#8216;s callbacks are executed (including
<tt>:dependent</tt> association options and
<tt>before_destroy</tt>/<tt>after_destroy</tt> <a
href="Observer.html">Observer</a> methods). Returns the collection of
objects that were destroyed; each will be frozen, to reflect that no
changes should be made (since they can&#8216;t be persisted).
</p>
<p>
Note: Instantiation, callback execution, and deletion of each record can be
time consuming when you&#8216;re removing many records at once. It
generates at least one SQL <tt>DELETE</tt> query per record (or possibly
more, to enforce your callbacks). If you want to <a
href="Relation.html#M001507">delete</a> many rows quickly, without concern
for their associations or callbacks, use <tt><a
href="Relation.html#M001506">delete_all</a></tt> instead.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>conditions</tt> - A string, array, or hash that specifies which records
to <a href="Relation.html#M001505">destroy</a>. If omitted, all records are
destroyed. See the Conditions section in the introduction to <a
href="Base.html">ActiveRecord::Base</a> for more information.

</li>
</ul>
<h4>Examples</h4>
<pre>
  Person.destroy_all(&quot;last_login &lt; '2004-04-04'&quot;)
  Person.destroy_all(:status =&gt; &quot;inactive&quot;)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001504-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001504-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
218:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conditions</span>
219:         <span class="ruby-identifier">where</span>(<span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">destroy_all</span>
220:       <span class="ruby-keyword kw">else</span>
221:         <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">destroy</span> }.<span class="ruby-identifier">tap</span> { <span class="ruby-identifier">reset</span> }
222:       <span class="ruby-keyword kw">end</span>
223:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001514" class="method-detail">
        <a name="M001514"></a>

        <div class="method-heading">
          <a href="#M001514" class="method-signature">
          <span class="method-name">eager_loading?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001514-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001514-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 335</span>
335:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eager_loading?</span>
336:       <span class="ruby-ivar">@should_eager_load</span> <span class="ruby-operator">||=</span> (<span class="ruby-ivar">@eager_load_values</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">||</span> (<span class="ruby-ivar">@includes_values</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">references_eager_loaded_tables?</span>))
337:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001498" class="method-detail">
        <a name="M001498"></a>

        <div class="method-heading">
          <a href="#M001498" class="method-signature">
          <span class="method-name">empty?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if there are no records.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001498-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001498-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 87</span>
87:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">empty?</span>
88:       <span class="ruby-identifier">loaded?</span> <span class="ruby-value">? </span><span class="ruby-ivar">@records</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">count</span>.<span class="ruby-identifier">zero?</span>
89:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001490" class="method-detail">
        <a name="M001490"></a>

        <div class="method-heading">
          <a href="#M001490" class="method-signature">
          <span class="method-name">initialize_copy</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001490-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001490-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 35</span>
35:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">other</span>)
36:       <span class="ruby-identifier">reset</span>
37:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001516" class="method-detail">
        <a name="M001516"></a>

        <div class="method-heading">
          <a href="#M001516" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001516-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001516-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 348</span>
348:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
349:       <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">inspect</span>
350:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001500" class="method-detail">
        <a name="M001500"></a>

        <div class="method-heading">
          <a href="#M001500" class="method-signature">
          <span class="method-name">many?</span><span class="method-args">() {|*block_args| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001500-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001500-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 99</span>
 99:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">many?</span>
100:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
101:         <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">many?</span> { <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">block_args</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">block_args</span>) }
102:       <span class="ruby-keyword kw">else</span>
103:         <span class="ruby-ivar">@limit_value</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">many?</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
104:       <span class="ruby-keyword kw">end</span>
105:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001489" class="method-detail">
        <a name="M001489"></a>

        <div class="method-heading">
          <a href="#M001489" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001489-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001489-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 31</span>
31:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
32:       <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
33:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001510" class="method-detail">
        <a name="M001510"></a>

        <div class="method-heading">
          <a href="#M001510" class="method-signature">
          <span class="method-name">primary_key</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001510-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001510-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 311</span>
311:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">primary_key</span>
312:       <span class="ruby-ivar">@primary_key</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">table</span>[<span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">primary_key</span>]
313:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001508" class="method-detail">
        <a name="M001508"></a>

        <div class="method-heading">
          <a href="#M001508" class="method-signature">
          <span class="method-name">reload</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001508-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001508-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 298</span>
298:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload</span>
299:       <span class="ruby-identifier">reset</span>
300:       <span class="ruby-identifier">to_a</span> <span class="ruby-comment cmt"># force reload</span>
301:       <span class="ruby-keyword kw">self</span>
302:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001509" class="method-detail">
        <a name="M001509"></a>

        <div class="method-heading">
          <a href="#M001509" class="method-signature">
          <span class="method-name">reset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001509-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001509-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 304</span>
304:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>
305:       <span class="ruby-ivar">@first</span> = <span class="ruby-ivar">@last</span> = <span class="ruby-ivar">@to_sql</span> = <span class="ruby-ivar">@order_clause</span> = <span class="ruby-ivar">@scope_for_create</span> = <span class="ruby-ivar">@arel</span> = <span class="ruby-ivar">@loaded</span> = <span class="ruby-keyword kw">nil</span>
306:       <span class="ruby-ivar">@should_eager_load</span> = <span class="ruby-ivar">@join_dependency</span> = <span class="ruby-keyword kw">nil</span>
307:       <span class="ruby-ivar">@records</span> = []
308:       <span class="ruby-keyword kw">self</span>
309:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001494" class="method-detail">
        <a name="M001494"></a>

        <div class="method-heading">
          <a href="#M001494" class="method-signature">
          <span class="method-name">respond_to?</span><span class="method-args">(method, include_private = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001494-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001494-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 49</span>
49:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">include_private</span> = <span class="ruby-keyword kw">false</span>)
50:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">include_private</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">method</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">include_private</span>)
51: 
52:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicFinderMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method</span>)
53:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:all_attributes_exists?</span>, <span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>)
54:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicScopeMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method</span>)
55:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:all_attributes_exists?</span>, <span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>)
56:       <span class="ruby-keyword kw">else</span>
57:         <span class="ruby-keyword kw">super</span>
58:       <span class="ruby-keyword kw">end</span>
59:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001513" class="method-detail">
        <a name="M001513"></a>

        <div class="method-heading">
          <a href="#M001513" class="method-signature">
          <span class="method-name">scope_for_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001513-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001513-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 329</span>
329:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scope_for_create</span>
330:       <span class="ruby-ivar">@scope_for_create</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
331:         <span class="ruby-ivar">@create_with_value</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">where_values_hash</span>
332:       <span class="ruby-keyword kw">end</span>
333:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001501" class="method-detail">
        <a name="M001501"></a>

        <div class="method-heading">
          <a href="#M001501" class="method-signature">
          <span class="method-name">scoping</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Scope all queries to the current scope.
</p>
<h4>Example</h4>
<pre>
  Comment.where(:post_id =&gt; 1).scoping do
    Comment.first # SELECT * FROM comments WHERE post_id = 1
  end
</pre>
<p>
Please check unscoped if you want to remove all previous scopes (including
the default_scope) during the execution of a block.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001501-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001501-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 117</span>
117:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scoping</span>
118:       <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">scoped_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>
119:       <span class="ruby-keyword kw">begin</span>
120:         <span class="ruby-keyword kw">yield</span>
121:       <span class="ruby-keyword kw">ensure</span>
122:         <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">scoped_methods</span>.<span class="ruby-identifier">pop</span>
123:       <span class="ruby-keyword kw">end</span>
124:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001497" class="method-detail">
        <a name="M001497"></a>

        <div class="method-heading">
          <a href="#M001497" class="method-signature">
          <span class="method-name">size</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <a href="Relation.html#M001497">size</a> of the records.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001497-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001497-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 82</span>
82:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">size</span>
83:       <span class="ruby-identifier">loaded?</span> <span class="ruby-value">? </span><span class="ruby-ivar">@records</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">count</span>
84:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001495" class="method-detail">
        <a name="M001495"></a>

        <div class="method-heading">
          <a href="#M001495" class="method-signature">
          <span class="method-name">to_a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001495-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001495-source">
<pre>
    <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 61</span>
61:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_a</span>
62:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@records</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">loaded?</span>
63: 
64:       <span class="ruby-ivar">@records</span> = <span class="ruby-identifier">eager_loading?</span> <span class="ruby-value">? </span><span class="ruby-identifier">find_with_associations</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">arel</span>.<span class="ruby-identifier">to_sql</span>)
65: 
66:       <span class="ruby-identifier">preload</span> = <span class="ruby-ivar">@preload_values</span>
67:       <span class="ruby-identifier">preload</span> <span class="ruby-operator">+=</span>  <span class="ruby-ivar">@includes_values</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">eager_loading?</span>
68:       <span class="ruby-identifier">preload</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">associations</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:preload_associations</span>, <span class="ruby-ivar">@records</span>, <span class="ruby-identifier">associations</span>) }
69: 
70:       <span class="ruby-comment cmt"># @readonly_value is true only if set explicitly. @implicit_readonly is true if there</span>
71:       <span class="ruby-comment cmt"># are JOINS and no explicit SELECT.</span>
72:       <span class="ruby-identifier">readonly</span> = <span class="ruby-ivar">@readonly_value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-ivar">@implicit_readonly</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@readonly_value</span>
73:       <span class="ruby-ivar">@records</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">readonly!</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">readonly</span>
74: 
75:       <span class="ruby-ivar">@loaded</span> = <span class="ruby-keyword kw">true</span>
76:       <span class="ruby-ivar">@records</span>
77:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001511" class="method-detail">
        <a name="M001511"></a>

        <div class="method-heading">
          <a href="#M001511" class="method-signature">
          <span class="method-name">to_sql</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001511-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001511-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 315</span>
315:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_sql</span>
316:       <span class="ruby-ivar">@to_sql</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">to_sql</span>
317:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001503" class="method-detail">
        <a name="M001503"></a>

        <div class="method-heading">
          <a href="#M001503" class="method-signature">
          <span class="method-name">update</span><span class="method-args">(id, attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>id</tt> - This should be the id or an array of ids to be updated.

</li>
<li><tt>attributes</tt> - This should be a hash of attributes or an array of
hashes.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Updates one record
  Person.update(15, :user_name =&gt; 'Samuel', :group =&gt; 'expert')

  # Updates multiple records
  people = { 1 =&gt; { &quot;first_name&quot; =&gt; &quot;David&quot; }, 2 =&gt; { &quot;first_name&quot; =&gt; &quot;Jeremy&quot; } }
  Person.update(people.keys, people.values)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001503-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001503-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 180</span>
180:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">attributes</span>)
181:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
182:         <span class="ruby-identifier">idx</span> = <span class="ruby-value">-1</span>
183:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">idx</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">update</span>(<span class="ruby-identifier">one_id</span>, <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">idx</span>]) }
184:       <span class="ruby-keyword kw">else</span>
185:         <span class="ruby-identifier">object</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
186:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
187:         <span class="ruby-identifier">object</span>
188:       <span class="ruby-keyword kw">end</span>
189:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001502" class="method-detail">
        <a name="M001502"></a>

        <div class="method-heading">
          <a href="#M001502" class="method-signature">
          <span class="method-name">update_all</span><span class="method-args">(updates, conditions = nil, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates all records with details given if they match a set of conditions
supplied, limits and order can also be supplied. This method constructs a
single SQL UPDATE statement and sends it straight to the database. It does
not instantiate the involved models and it does not trigger Active Record
callbacks or validations.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>updates</tt> - A string, array, or hash representing the SET part of an
SQL statement.

</li>
<li><tt>conditions</tt> - A string, array, or hash representing the WHERE part
of an SQL statement. See conditions in the intro.

</li>
<li><tt>options</tt> - Additional options are <tt>:limit</tt> and
<tt>:order</tt>, see the examples for usage.

</li>
</ul>
<h4>Examples</h4>
<pre>
  # Update all customers with the given attributes
  Customer.update_all :wants_email =&gt; true

  # Update all books with 'Rails' in their title
  Book.update_all &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;

  # Update all avatars migrated more than a week ago
  Avatar.update_all ['migrated_at = ?', Time.now.utc], ['migrated_at &gt; ?', 1.week.ago]

  # Update all books that match conditions, but limit it to 5 ordered by date
  Book.update_all &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;, :order =&gt; 'created_at', :limit =&gt; 5
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001502-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001502-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 151</span>
151:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {})
152:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conditions</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">present?</span>
153:         <span class="ruby-identifier">where</span>(<span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">apply_finder_options</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">:limit</span>, <span class="ruby-identifier">:order</span>)).<span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>)
154:       <span class="ruby-keyword kw">else</span>
155:         <span class="ruby-comment cmt"># Apply limit and order only if they're both present</span>
156:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@limit_value</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@order_values</span>.<span class="ruby-identifier">present?</span>
157:           <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">update</span>(<span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:sanitize_sql_for_assignment</span>, <span class="ruby-identifier">updates</span>)))
158:         <span class="ruby-keyword kw">else</span>
159:           <span class="ruby-identifier">except</span>(<span class="ruby-identifier">:limit</span>, <span class="ruby-identifier">:order</span>).<span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>)
160:         <span class="ruby-keyword kw">end</span>
161:       <span class="ruby-keyword kw">end</span>
162:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001512" class="method-detail">
        <a name="M001512"></a>

        <div class="method-heading">
          <a href="#M001512" class="method-signature">
          <span class="method-name">where_values_hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001512-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001512-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 319</span>
319:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">where_values_hash</span>
320:           <span class="ruby-constant">Hash</span>[<span class="ruby-ivar">@where_values</span>.<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">w</span><span class="ruby-operator">|</span>
321:             <span class="ruby-identifier">w</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:operator</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">operator</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:==</span>
322:           }.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">where</span><span class="ruby-operator">|</span>
323:             [<span class="ruby-identifier">where</span>.<span class="ruby-identifier">operand1</span>.<span class="ruby-identifier">name</span>,
324:              <span class="ruby-identifier">where</span>.<span class="ruby-identifier">operand2</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:value</span>) <span class="ruby-operator">?</span>
325:              <span class="ruby-identifier">where</span>.<span class="ruby-identifier">operand2</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">where</span>.<span class="ruby-identifier">operand2</span>]
326:         }]
327:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M001517" class="method-detail">
        <a name="M001517"></a>

        <div class="method-heading">
          <a href="#M001517" class="method-signature">
          <span class="method-name">method_missing</span><span class="method-args">(method, *args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001517-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001517-source">
<pre>
     <span class="ruby-comment cmt"># File /Library/Ruby/Gems/1.8/gems/activerecord-3.0.0/lib/active_record/relation.rb, line 354</span>
354:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
355:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">method</span>)
356:         <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
357:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">scopes</span>[<span class="ruby-identifier">method</span>]
358:         <span class="ruby-identifier">merge</span>(<span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>))
359:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)
360:         <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
361:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)
362:         <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
363:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicFinderMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method</span>)
364:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>
365:         <span class="ruby-keyword kw">super</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:all_attributes_exists?</span>, <span class="ruby-identifier">attributes</span>)
366: 
367:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span>.<span class="ruby-identifier">finder?</span>
368:           <span class="ruby-identifier">find_by_attributes</span>(<span class="ruby-identifier">match</span>, <span class="ruby-identifier">attributes</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
369:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">match</span>.<span class="ruby-identifier">instantiator?</span>
370:           <span class="ruby-identifier">find_or_instantiator_by_attributes</span>(<span class="ruby-identifier">match</span>, <span class="ruby-identifier">attributes</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
371:         <span class="ruby-keyword kw">end</span>
372:       <span class="ruby-keyword kw">else</span>
373:         <span class="ruby-keyword kw">super</span>
374:       <span class="ruby-keyword kw">end</span>
375:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>